# 직렬화

## 직렬화란?

객체를 그 자체를 DB에 저장하거나 통신으로 주고받는 것은 불가능하다.  
객체를 주고 받으면서 통신 할 수 있도록 데이터화 하는 과정이 필요  
위 과정을 직렬화(serialization) 라고 한다.

바이너리 통신이라면 Byte Stream 으로 변환,  
텍스트라면 기계로 파싱하고 사람도 읽을 수 있는 형태를 사용한다.  
⇒ XML, JSON, YAML 같은 포맷이 많이 사용

### 자바 직렬화

자바 직렬화란 자바 시스템 내부 객체 혹은 데이터를  
외부에서 사용할 수 있도록 byte형태로 변환하는 기술과  
byte를 다시 객체로 변환하는 기술(역직렬화)를 아울러 말한다.

## 마샬링

구글에 직렬화를 검색해보면 마샬링(marshalling)이라는 개념이 연관되어 많이 검색된다.  
그만큼 서로 유사하다는 의미일것이다.

마샬링은 직렬화와 거의 비슷한 개념이다.  
차이점이라면 직렬화는 '변환'을 하는 것 을 의미하고,  
마샬링는 '변환하는 일련의 과정'을 의미한다고 할 수 있다.

직렬화 과정에 마샬링이 포함되며, 조금 더 큰 개념이라고 볼 수 있다.  
실제 객체 전송 과정을 나타내면 아래와 같다.

1. 직렬화된 객체를 바이트 단위로 분해한다.(marshalling)
2. 분해된 데이터를 순서에 따라 전송한다.
3. 전송받은 데이터를 다시 객체로 되돌린다.(unmarshalling)

## 자바 마샬링

직렬화와 마샬링은 거의 같지만 java에서는 마샬링을 특수하게 다룬다.  
위키피디아에 따르면 파이썬에서는 직렬화와 마샬링을 동일하게 간주한다.

자바에서는 마샬링은 코드베이스를 기록하지만, 직렬화는 그렇지 않다는 점이 다르다.
원격 프로시저를 호출하는것은 유사하나,  
마샬링은 함수의 파라미터, 리턴 값 등을 전달 할수 있으나,  
직렬화는 구조화된 byte 형식 데이터로 복사한다.

- 직렬화  
  역직렬화를 통해 ‘객체 또는 데이터’의 복사본을 만들 수 있다.
- 마샬링  
  직렬화와 동일하거나, 원격 객체로 만들 수 있음.
  원격 객체의 경우 메서드 호출은 RPC(또는 RMI)가 됨

## JSON

JavaScript Object Notation.  
역직렬화 기술에서의 거의 끝판왕이라고 볼 수 있다.  
대부분의 프로그램에서 json형식으로 객체를 다룬다고 생각하면 된다.  
json 형식은 사람이 읽기 쉽고, 기계도 해석하고 생성하기 쉽다.

json의 형식은 아래와 같다.  
key:value 와 같은 포맷으로 이루어진다.

```json
{
  "name": "홍길동",
  "age": 99
}
```

보통 json.parse(String)으로 역직렬화 하거나.  
json.stringify(String) 으로 직렬화 하여 사용한다.

생성 및 해석 과정 순서를 나타내면 아래와 같다.

- 생성과정 : DTO 객체 → 변환기 → json 문자열
- 해석과정: json문자열 → 변환기 → DTO 객체

> 위 과정에서 변환기 중 가장 많이 쓰는것이  
> Spring Boot에서 거의 기본 내장된 jackson이다.

### JSON 스키마에서의 DTO class

DTO 클래스를 표현하기 위해서 보통 json을 많이 사용한다.  
DTO에서 '필드 = 값'을 json의 'key:value' 에 매핑하여 표현 할 수 있다.

> 참고자료  
> <https://techblog.woowahan.com/2550/>  
> <https://hyesun03.github.io/2019/09/08/marshalling-vs-serialization/> > <https://wookcode.tistory.com/193>
