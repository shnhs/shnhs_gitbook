# Hexagonal Architecture

> ! 개인의 언어로 표현된 부분이 많습니다. 내용이 틀리거나 약간 다를 수 있음 !

## 개요

전통적 3계층 아키텍쳐에서는  
Presentation(UI) -> Domain -> Data 와 같은 형태로 의존적으로 설계되곤 한다.

이러한 전통적인 계층형 아키텍쳐에도 몇가지 단점이 존재한다.

1. 계층간 긴밀한 결합  
   각 계층간 연결이 긴밀하게 존재하여, 다른 계층에 영향이 없이 한 계층을 수정하기 어렵다.  
   이 때문에 테스트가 어려워지는 단점도 함께 생긴다.

2. 제한된 확장 및 변경
   계층이 서로 긴밀하게 연결되어 있으므로, 기술 스택을 교체하려고 해도  
   서로 영향을 주기 때문에 쉽게 교체가 불가능하다.

이 밖에도 여러가지 단점이 있는데, 이런 단점을 보완하기 위해서.
`Hexagonal Architecture` 라는 개념이 제시되었다.

알리스테어 콕번의 논의에서는

## 개념

이름에서 알 수 있듯이 흔히 6각형의 이미지로 나타내곤 한다.

![hexagonal Architecture](/devRoad/week09/img/hexa.png)

사실 정확히 6각형일 필요는 없다.  
바깥에 이미 존재하는 다른 연결 이외에 더 추가될 수 있음을 나타내는 의미 정도이다.

헥사고날 아키텍쳐는 포트/어댑터 라는 이름으로도 불린다.  
포트와 어댑터의 기능을 생각해보면 두 규격이 맞는다면 상황에 맞게, 필요에 맞게  
바꿔 끼울 수 있다.

헥사고날 아키텍쳐의 핵심 개념도 이와 비슷하다.  
중요한 것은 우리의 애플리케이션이고 그 외의 것은 애플리케이션의 포트에 맞게  
가져와서 끼워 사용하기만 하면 된다 는 개념이다.

## 구조

우리의 애플리케이션이 핵심으로 다루는 관심사를 도메인이라고 하고,  
그 도메인에 필요한 비즈니스 로직(유스 케이스)이 있다.

이 둘 이외에 다른 것들은 애플리케이션 외부의 무언가 라고 취급을 할 수 있게 된다.  
즉 UI와 DB 또한 애플리케이션에 종속된 것이 아닌  
애플리케이션 외부에 있는 무언가 인 것이다.

위에서 포트와 어댑터로 표현 한 것처럼, 애플리케이션에는 여러가지 포트가 존재 할 수있다.  
그 중 흐름을 받아오는 포트를 인바운드 포트 혹은 인풋 포트,  
흐름이 나가는 포트를 아웃바운드 포트 혹은 아웃풋 포트 라고 한다.

우리가 주로 사용하는 어플리케이션의 흐름을 생각해보면  
UI를 통한 이용은 인바운드 포트, DB와 같은 Database관련 이용은 아웃바운드 포트를 사용하는 것이 일반적이다.

이러한 구조를 사용함으로써 우리는 Port에만 집중하여 코드를 작성할 수 있다.  
Port에 집중한다는 의미는 어떤 입력을 받았을 경우 혹은 어떤 입력을 내보내야 할 경우  
어떤 처리 과정을 필요로 하는가 에만 집중하여 만들 수 있다는 의미이다.  
여기서 처리과정은 보통 도메인 모델에서 담당하게 된다.

## 이점

그렇다면 헥사고날 아키텍처를 이용하면 정확이 어떤게 좋은가?

1. 각 계층이 더욱 명확하게 구분된다.  
   각 계층이 더욱 명확하게 구분되어, 어떤 계층에 영향을 주지않고 수정 혹은 교체가 가능하다.

2. 테스트가 쉽다.  
   1번의 연장선으로, 서로 경계가 분리되어 있기 때문에  
   테스트 범위를 잡기 편하고, Mocking 하기도 수월하다.

3. 유연성 확장.  
   포트와 어댑터 구조를 생각해보면 외부에 다른 기술 스택을 사용하고 싶으면  
   해당하는 어댑터를 가져와서 어플리케이션의 포트에 맞게 끼우기만 하면 된다.  
   애플리케이션의 기술 스택이 더욱 유연해지는 장점이 있다
