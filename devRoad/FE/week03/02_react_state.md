# 2

## React State

state(상태)란 리액트에서 '변경'을 다루기 위한 개념으로 사용된다.  
state도 일종의 변수 혹은 데이터이다. 그러나 state에 변화가 생기게 되면  
관련된 컴포넌트들이 재렌더링 되어서 화면에 변화가 일어난다.  

화면에 영향을 주는 데이터라는 측면에서 props와 비슷할 수 있으나,  
props는 컴포넌트에 '전달'되어 사용되지만, state는 컴포넌트 '안'에서 관리된다.  

### state의 조건

모든 변수를 state로 관리하기에는 무리가 있다. 상태가 너무 많아진다면 복잡해지고 관리하기도 힘들다.  
아래와 같은 조건을 고려해가면서 어떤 정보를 state로 관리할 지 생각을 해봐야한다.  

- 변경 없이 고정된 값을 가지는 건 state로 관리하지 않아도 된다.
- 부모 컴포넌트가 props를 통해 전달해주는 데이터는 state가 아니다.  
- 다른 state나 props를 통해 계산이 가능한 것은 state가 아니다.

### state 사용

`useState` 훅을 사용하여 상태 변수를 생성한다.  
상태 초기값을 지정하여 생성할 수도 있고, 생략해도 된다.  

useState를 호출하면 배열을 반환하며 내부에서 구조분해할당을 한다.  
첫번째 요소는 현재 상태, 두번째 요소는 상태를 업데이트하는 함수이다.

```ts
import React, { useState } from 'react';

// 초기값이 0인 count 상태 생성
const [count, setCount] = useState<number>(0);

// count의 값을 +1
setCount(count + 1)
```

> 관례적으로 상태업데이트 함수는 상태 변수명앞에 set을 붙이고 카멜케이스로 네이밍한다.

### 상태 끌어올리기

상태 관리 중 종종 동일한 변경을 여러개의 컴포넌트에 반영이 필요한 경우가 있다.  
그러나 리액트는 단방향 데이터 흐름을 가지므로, 자식 컴포넌트가 부모 컴포넌트에게,  
혹은 다른 자식 컴포넌트에게 직접 상태를 전달할 수 없다.  

그렇기 때문에 가장 가까운 공통 부모 컴포넌트까지 state를 끌어올리고  
부모 컴포넌트에서 다시 데이터를 내려주는 방식을 자주 사용한다.  
이를 상태 끌어올리기(Lifting State Up) 이라고 한다.  

상태를 끌어올릴 때 가장 자주 쓰는 패턴은 부모 컴포넌트에서 이벤트 핸들러를 선언한 뒤,  
자식 컴포넌트에는 이벤트 핸들러를 props로 전달한다.  
그리고 자식 컴포넌트는 필요한 로직에 따라 전달받은 함수를 실행한다.  
그렇게 되면 자식 컴포넌트에서 변경된 정보를 부모 컴포넌트의 상태로 반영할 수 있다.
