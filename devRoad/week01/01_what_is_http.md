# HTTP의 기초

## HTTP란?

HTTP(HyperText Transfer Protocol) 이란 HTML 문서와 같은 리소스를 가지고 올수 있도록 하는 프로토콜이다.

> protocol이란? - 쉽게말해서 약속이다. 당연히 지켜야 하는 규칙같은것.

애플리케이션 레이어의 7계층(응용계층) 중 하나가 바로 HTTP 이다.

## 서버 - 클라이언트 프로토콜

HTTP를 다른말로 서버-클라이언트 프로토콜 이라고도 한다.  
클라이언트는 서버에게 '무언가'를 요청하고  
서버는 그 요청에 대해 처리를 하고 응답을 한다.  
클라이언트가 요청하는 '무언가'를 보통 서비스/리소스라고 부른다.  
URL, URI 라고 하는것을 사용하여 어떤것을 요청하는지 나타내게 된다.

## 무상태

HTTP의 주요 특징 중 하나는 클라이언트의 상태를 저장하지 않는다는 것이다.  
그렇기 때문에 매 요청 마다 독립적으로 클라이언트는  
'현재 내가 어떤 클라이언트다' 라는 정보를 같이 포함하여 요청해야 한다.

## HTTP 메시지

HTTP 메시지는 기본적으로 사람이 눈으로 읽을 수 있는 형태로 구성되어 있다.
요청과 응답은 기본적인 뼈대는 같은 구조로 이루어져 있다.  
그 뼈대는 아래와 같다.

1. Start Line  
   요청 혹은 응답에 대한 기본 정보를 나타낸다.  
   요청은 [HTTP 메서드 / 요청 URL / HTTP 버전] 으로 구성되며  
   응답은 [HTTP 메서드 / 응답 코드 / 응답 코멘트] 로 구성된다
2. Headers  
   자세하게 기술하지는 않지만 여러가지 정보를 가지는 데이터 묶음 파트이다.  
   대표적인 정보로 Content-Length 와 같은 항목이 있다.
3. 빈 줄  
   Start Line과 Header가 여기까지라고 식별 할 수 있도록 중간에 빈 줄이 하나 삽입된다.
4. Body  
   빈 줄 다음에는 요청/응답에서 요청하는/내어주는 정보인 Body가 위치한다.  
   1, 2, 3의 경우에는 보통 눈으로 읽을 수 있는 텍스트의 형태이지만  
   Body는 이미지나 오디오 같은 경우 인코딩 되어 눈으로 읽을 수 없을 수도 있다.  
   경우에 따라 Body는 있을수도 없을 수도 있다.
   > 혹은 Body가 여러개 있을수도 있다. 대표적인 예시로 Multipart/form-data.

## HTTP 메서드

먼저 메서드란, 요청하는 리소스로 클라이언트가 어떤 동작을 할 것이다 라는 정보이다.
HTTP 메서드의 종류는 아래와 같다.

1. GET  
   쉽게 말해서 읽어오기.  
   클라이언트 무언가를 읽기만, 얻기 만 할거야 라는 의미를 가진다.  
   보통 브라우저에서 페이지를 이동하는 거는 대부분 GET 이다.

2. HEAD  
   Body가 없는 GET 메서드 라고 생각하면 편하다.  
   해당 리소스로 접근가능한지 권한 확인하거나 존재 여부 확인 등 특수한 경우에 사용한다.

3. POST  
   제출 혹은 등록하는 메서드 이다. 해당 행위는 보통 멱등성을 보장하지 않는다.  
   Collection Pattern에서 무언가 생성하거나 등록 하는 용도로 사용한다. 사실상 API를 구성할 때 업계 표준이다.

   > 멱등성이란? - 같은 행위를 여러번 했을 때 같은 결과가 나오는 것  
   >  GET의 경우 같은 페이지를 요청하면 같은 결과를 응답받는다.  
   >  그러나 POST의 경우 어떤 데이터를 등록할 때 등록이 될 수도 혹은 안될 수도 있다.  
   >  대표적으로 회원가입 같은 경우 처음에는 정상적으로 계정을 생성 할 수 있으나, 그 다음부터는 중복의 이유 등으로 실패할 수 있다.

4. PUT  
   리소스를 업데이트 하는 메서드이다. 단, 지정한 리소스가 없다면 Create한다.  
   PUT 메서드에서 주의해야 할 점은 PUT을 통해 업데이트하는 것은 부분이 아니라 전체 업데이트 라는 점이다.  
   쉽게 말해서 클라이언트가 요청한 리소스로 덮어쓰기 한다고 생각하면 된다.

5. PATCH  
   PUT과 유사하게 보통 업데이트를 할 때 사용하는 메서드 이다.  
   그러나 PATCH는 부분적인 업데이트 가능

6. DELETE  
   삭.제.

7. OPTIONS  
   지원 정보를 확인하는 메서드 이다.  
   HEADER 정보, 어떤 메서드가 가능한지 확인하는 용도 사용한다.  
   사실 주로 사용하는 메서드는 아니다.

## HTTP 응답

응답에서 가장 눈여겨야 봐야 할 것은 Status Code 이다.  
물론 코드와 함께 Not found / Success 와 같은 눈으로 읽을 수 있는 코멘트도 같이 응답하나,  
사실 코멘트는 내부에서 처리될 때 어떤것으로 와도 상관이 없다. 응답에 결과는 결국 Status Code에 의해 정해진다고 생각하면 된다.

HTTP status Code 는 보통 3자리의 숫자로 구성되며 크게 5개의 범위로 나눌 수 있다.

- 1xx  
   정보를 나타낸다.  
   사실상 직접 쓰는 일은 드물다. 로우레벨에 관련된 부분이 많다.

- 2xx  
   성공관련 코드.

  - 200 OK : 아무튼 성공했다 의 대표적인 코드
  - 201 Created : 보통 POST 메서드로 리소스가 잘 생성 되었다를 나타냄
  - 204 No Content : 성공은 했는데, 내용(BODY)가 없을 때 받을 수 있는 코드

- 3xx  
   리다이렉션 관련 코드  
   리다이렉션 이란 어디론가의 페이지로 다시 이동시키는 것을 말한다.

  - 304 Not Modified : 페이지 내용에 바뀐게 없다 라는 의미이다.  
    보통 새로고침 하면 볼 수 있다. 만약에 캐시를 날리면서 새로고침 하면 200 Code를 받는다.

- 4xx  
   클라이언트 쪽 문제가 있을 때 응답받는 코드  
   사용자가 뭔가 요청을 잘못했다 라는 의미이다.

  - 404 Not Found : 클라이언트가 없는거를 요청했다.

- 5xx  
   서버 쪽 문제가 있을 때 응답받는 코드  
   요청에는 이상이 없으나, 서버에서 처리하다가 뭔가 뭔가 잘못되었을 때 발생하는 코드이다.

  - 500 Internal Server Error : 서버가 요청에 대한 처리방법을 모를 때 발생하는 코드.
